/*! For license information please see webRecorder.js.LICENSE.txt */
(()=>{"use strict";var e={83:(e,t,n)=>{var i;let r,o;function a(e,t){if(e.nodeType!==Node.ELEMENT_NODE)throw new Error("Can't generate CSS selector for non-element node type.");if("html"===e.tagName.toLowerCase())return"html";const n={root:document.body,idName:e=>!0,className:e=>!0,tagName:e=>!0,attr:(e,t)=>!1,seedMinLength:1,optimizedMinLength:2,threshold:1e3,maxNumberOfTries:1e4};r=Object.assign(Object.assign({},n),t),o=function(e,t){return e.nodeType===Node.DOCUMENT_NODE?e:e===t.root?e.ownerDocument:e}(r.root,n);let a=l(e,i.All,(()=>l(e,i.Two,(()=>l(e,i.One)))));if(a){const t=P(N(a,e));return t.length>0&&(a=t[0]),c(a)}throw new Error("Selector was not found.")}function l(e,t,n){let o=null,a=[],l=e,c=0;for(;l&&l!==r.root.parentElement;){let e=E(h(l))||E(...f(l))||E(...g(l))||E(m(l))||[{name:"*",penalty:3}];const s=v(l);if(t===i.All)s&&(e=e.concat(e.filter(b).map((e=>p(e,s)))));else if(t===i.Two)e=e.slice(0,1),s&&(e=e.concat(e.filter(b).map((e=>p(e,s)))));else if(t===i.One){const[t]=e=e.slice(0,1);s&&b(t)&&(e=[p(t,s)])}for(let t of e)t.level=c;if(a.push(e),a.length>=r.seedMinLength&&(o=u(a,n),o))break;l=l.parentElement,c++}return o||(o=u(a,n)),o}function u(e,t){const n=P(k(e));if(n.length>r.threshold)return t?t():null;for(let e of n)if(d(e))return e;return null}function c(e){let t=e[0],n=t.name;for(let i=1;i<e.length;i++){const r=e[i].level||0;n=t.level===r-1?`${e[i].name} > ${n}`:`${e[i].name} ${n}`,t=e[i]}return n}function s(e){return e.map((e=>e.penalty)).reduce(((e,t)=>e+t),0)}function d(e){switch(o.querySelectorAll(c(e)).length){case 0:throw new Error(`Can't select any node with this selector: ${c(e)}`);case 1:return!0;default:return!1}}function h(e){const t=e.getAttribute("id");return t&&r.idName(t)?{name:"#"+T(t,{isIdentifier:!0}),penalty:0}:null}function f(e){const t=Array.from(e.attributes).filter((e=>r.attr(e.name,e.value)));return t.map((e=>({name:"["+T(e.name,{isIdentifier:!0})+'="'+T(e.value)+'"]',penalty:.5})))}function g(e){return Array.from(e.classList).filter(r.className).map((e=>({name:"."+T(e,{isIdentifier:!0}),penalty:1})))}function m(e){const t=e.tagName.toLowerCase();return r.tagName(t)?{name:t,penalty:2}:null}function v(e){const t=e.parentNode;if(!t)return null;let n=t.firstChild;if(!n)return null;let i=0;for(;n&&(n.nodeType===Node.ELEMENT_NODE&&i++,n!==e);)n=n.nextSibling;return i}function p(e,t){return{name:e.name+`:nth-child(${t})`,penalty:e.penalty+1}}function b(e){return"html"!==e.name&&!e.name.startsWith("#")}function E(...e){const t=e.filter(y);return t.length>0?t:null}function y(e){return null!=e}function*k(e,t=[]){if(e.length>0)for(let n of e[0])yield*k(e.slice(1,e.length),t.concat(n));else yield t}function P(e){return Array.from(e).sort(((e,t)=>s(e)-s(t)))}function*N(e,t,n={counter:0,visited:new Map}){if(e.length>2&&e.length>r.optimizedMinLength)for(let i=1;i<e.length-1;i++){if(n.counter>r.maxNumberOfTries)return;n.counter+=1;const o=[...e];o.splice(i,1);const a=c(o);if(n.visited.has(a))return;d(o)&&w(o,t)&&(yield o,n.visited.set(a,!0),yield*N(o,t,n))}}function w(e,t){return o.querySelector(c(e))===t}n.d(t,{I:()=>S}),function(e){e[e.All=0]="All",e[e.Two=1]="Two",e[e.One=2]="One"}(i||(i={}));const x=/[ -,\.\/:-@\[-\^`\{-~]/,_=/[ -,\.\/:-@\[\]\^`\{-~]/,L=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,C={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1};function T(e,t={}){const n=Object.assign(Object.assign({},C),t);"single"!=n.quotes&&"double"!=n.quotes&&(n.quotes="single");const i="double"==n.quotes?'"':"'",r=n.isIdentifier,o=e.charAt(0);let a="",l=0;const u=e.length;for(;l<u;){const t=e.charAt(l++);let o,c=t.charCodeAt(0);if(c<32||c>126){if(c>=55296&&c<=56319&&l<u){const t=e.charCodeAt(l++);56320==(64512&t)?c=((1023&c)<<10)+(1023&t)+65536:l--}o="\\"+c.toString(16).toUpperCase()+" "}else o=n.escapeEverything?x.test(t)?"\\"+t:"\\"+c.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(t)?"\\"+c.toString(16).toUpperCase()+" ":"\\"==t||!r&&('"'==t&&i==t||"'"==t&&i==t)||r&&_.test(t)?"\\"+t:t;a+=o}return r&&(/^-[-\d]/.test(a)?a="\\-"+a.slice(1):/\d/.test(o)&&(a="\\3"+o+" "+a.slice(1))),a=a.replace(L,(function(e,t,n){return t&&t.length%2?e:(t||"")+n})),!r&&n.wrap?i+a+i:a}var A=n(928),X=function(e){return e.nodeType==window.Node.ELEMENT_NODE},I=function(e){return"A"==e.nodeName},Z=function(e){return"LABEL"==e.nodeName},S=function(e){var t=this;this.build=function(e){A.bZ.debug("Building for Element:",e);var n=[["css:attributes",t.buildCssDataAttr],["id",t.buildId],["link",t.buildLinkText],["name",t.buildName],["css",t.buildCssFinder],["xpath:link-text",t.buildXPathLink],["xpath:image",t.buildXPathImg],["xpath:attributes",t.buildXPathAttr],["xpath:relative-id",t.buildXPathIdRelative],["xpath:href",t.buildXPathHref],["xpath:position",t.buildXPathPosition],["xpath:inner-text",t.buildXPathInnerText],["xpath:input-label",t.buildXPathInputLabel]],i=[];return n.forEach((function(t){var n=t[0],r=t[1];try{var o=r(e);o&&("string"==typeof o?i.push([n,o]):o.forEach((function(e){return i.push([n,e])})))}catch(e){A.bZ.error("Failed to build '".concat(n,"': ").concat(e))}})),i},this.logValidation=function(e,t){return e?A.bZ.debug("Selector validation PASSED for:",t):A.bZ.debug("Selector validation FAILED for:",t),e},this.validateId=function(e){return null!==document.getElementById(e)},this.validateName=function(e){return null!==document.getElementsByName(e)},this.validateXPath=function(e){return null!==document.evaluate(e,document,null,XPathResult.ANY_TYPE,null)},this.validateCSS=function(e){return null!==document.querySelector(e)},this.getSelectorAsObject=function(e){return{strategy:e[0].split(":",1)[0],value:e[1]}},this.getElementByXPath=function(e){return document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue},this.getXPathFromParent=function(e){var n="/"+e.nodeName.toLowerCase(),i=t.getNodeNumber(e);return i>0&&(n+="["+(i+1)+"]"),n},this.getNodeNumber=function(e){for(var t,n=(null===(t=e.parentNode)||void 0===t?void 0:t.childNodes)||[],i=0,r=0;r<n.length;r++){var o=n[r];if(o.nodeName==e.nodeName){if(o==e)return i;i++}}return 0},this.getUniqueXPath=function(e,n){if(n!=t.getElementByXPath(e))for(var i=0,r=n.ownerDocument.evaluate(e,n.ownerDocument,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength;i<r;i++){var o="("+e+")["+(i+1)+"]";if(n==t.getElementByXPath(o))return o}return e},this.getXPathValue=function(e){if(e.indexOf("'")<0)return"'"+e+"'";if(e.indexOf('"')<0)return'"'+e+'"';for(var t="concat(",n="",i=!1;!i;){var r=e.indexOf("'"),o=e.indexOf('"');if(r<0){t+="'"+e+"'",i=!0;break}if(o<0){t+='"'+e+'"',i=!0;break}o<r?(t+="'"+(n=e.substring(0,r))+"'",e=e.substring(n.length)):(t+='"'+(n=e.substring(0,o))+'"',e=e.substring(n.length)),t+=","}return t+")"},this.buildCssDataAttr=function(e){for(var t=["data-test","data-test-id"],n=0;n<t.length;n++){var i=t[n],r=e.getAttribute(i);if(r)return"css=*["+i+'="'+r+'"]'}return null},this.buildId=function(e){return e.hasAttribute("id")&&t.logValidation(t.validateId(e.id),"id:"+e.id)?e.id:null},this.buildLinkText=function(e){if(!I(e))return null;var t=e.textContent||"";return t.match(/^\s*$/)?null:t.replace(/\xA0/g," ").replace(/^\s*(.*?)\s*$/,"$1")},this.buildName=function(e){if(e.hasAttribute("name")){var n=e.getAttribute("name");if(n&&t.logValidation(t.validateName(n),"name:"+n))return n}return null},this.buildCssFinder=function(e){var n=a(e);return n&&t.logValidation(t.validateCSS(n),"css:"+n)?n:null},this.buildXPathLink=function(e){if(!I(e))return null;var n=e.textContent||"";if(n.match(/^\s*$/))return null;var i="//a[contains(text(),'"+n.replace(/^\s+/,"").replace(/\s+$/,"")+"')]",r=t.getUniqueXPath(i,e);return r&&t.logValidation(t.validateXPath(r),"xpath:"+r)?r:null},this.buildXPathImg=function(e){if("IMG"!=e.nodeName)return null;var n="";if(e.alt)n="//img[@alt="+t.getXPathValue(e.alt)+"]";else if(e.title)n="//img[@title="+t.getXPathValue(e.title)+"]";else{if(!e.src)return null;n="//img[contains(@src,"+t.getXPathValue(e.src)+")]"}var i=t.getUniqueXPath(n,e);return i&&t.logValidation(t.validateXPath(i),"xpath:"+i)?i:null},this.buildXPathAttr=function(e){var n=["id","name","value","type","action","onclick"],i=function(n,i,r){for(var o="//"+n+"[",a=0;a<i.length;a++){a>0&&(o+=" and ");var l=i[a];o+="@"+l+"="+t.getXPathValue(r[l])}return o+="]",t.getUniqueXPath(o,e)};if(!e.attributes)return null;for(var r={},o=e.attributes,a=0;a<o.length;a++){var l=o[a];r[l.name]=l.value}var u=[];for(a=0;a<n.length;a++){var c=n[a];if(r[c]){u.push(c);var s=i(e.nodeName.toLowerCase(),u,r);if(e==t.getElementByXPath(s)&&s&&t.logValidation(t.validateXPath(s),"xpath:"+s))return s}}return null},this.buildXPathIdRelative=function(e){for(var n="",i=e;i;){var r=i.parentNode;if(!r)return null;if(n=t.getXPathFromParent(i)+n,X(r)&&r.getAttribute("id")){var o="//"+r.nodeName.toLowerCase()+"[@id="+t.getXPathValue(r.getAttribute("id")||"")+"]"+n,a=t.getUniqueXPath(o,e);if(a&&t.logValidation(t.validateXPath(a),"xpath:"+a))return a}i=r}return null},this.buildXPathHref=function(e){if(!e.hasAttribute("href"))return null;var n,i=e.getAttribute("href")||"";if(!i)return null;n=i.search(/^http?:\/\//)>=0?"//a[@href="+t.getXPathValue(i)+"]":"//a[contains(@href, "+t.getXPathValue(i)+")]";var r=t.getUniqueXPath(n,e);return r&&t.logValidation(t.validateXPath(r),"xpath:"+r)?r:null},this.buildXPathPosition=function(e){for(var n="",i=e;i;){var r=i.parentNode,o="/"+(n=r?t.getXPathFromParent(i)+n:"/"+i.nodeName.toLowerCase()+n);if(e==t.getElementByXPath(o)&&o&&t.logValidation(t.validateXPath(o),"xpath:"+o))return o;i=r}return null},this.buildXPathInnerText=function(e){if(!(e instanceof HTMLElement&&e.innerText))return null;var n="//"+e.nodeName.toLowerCase()+"[contains(.,"+t.getXPathValue(e.innerText)+")]",i=t.getUniqueXPath(n,e);return i&&t.logValidation(t.validateXPath(i),"xpath:"+i)?n:null},this.buildXPathInputLabel=function(e){if("INPUT"!=e.nodeName)return null;for(var n,i=document.getElementsByTagName("LABEL"),r={},o=0;o<i.length;o++){var a=i[o];Z(a)&&a.htmlFor&&document.getElementById(a.htmlFor)&&(r[a.htmlFor]=a)}if(e.id&&Object.prototype.hasOwnProperty.call(e,"id"))n=r[e.id];else{var l=e.parentNode;if(!l)return null;var u=[],c=l.childNodes;for(o=0;o<c.length;o++){var s=c[o];Z(s)&&u.push(s)}if(1!==u.length)return null;n=u[0]}var d="//label[contains(.,"+t.getXPathValue(n.innerText)+")]/../input",h=t.getUniqueXPath(d,e);return h&&t.logValidation(t.validateXPath(h),"xpath:"+h)?h:null},this.window=e}},928:(e,t,n)=>{n.d(t,{bZ:()=>a,gw:()=>l,C5:()=>u,B9:()=>c});var i=n(83),r=n(159),o=function(e,t){var n=this;this.setApp=function(e){n.app=e},this.setOnPick=function(e){n.onPick=e},this.setBuilder=function(e){n.builder=e},this.addInfoBox=function(){var e=document.createElement("div");e.id="inspector-info-box",n.infoBox=e,document.body.appendChild(n.infoBox)},this._showPick=function(e,t){var i=e.target;i!==t&&(n._removeHighlights(),i instanceof Element&&("recorder"===n.app?(0,r.g6)(e,n.builder,{type:"verify",value:void 0})&&n._addHighlight(i):n._addHighlight(i),t=i))},this._showDivInfo=function(e){e.target instanceof HTMLElement&&n.infoBox&&n.builder&&(n.infoBox.textContent="No element to target",n.infoBox.style.left=e.pageX-8+"px",n.infoBox.style.top=e.pageY-20+"px")},this._addHighlight=function(e){a.debug("Add highlight: ",e),e.setAttribute("data-inspector-highlight","")},this._removeHighlights=function(){a.debug("Removing highlight...");for(var e=document.querySelectorAll("[data-inspector-highlight]"),t=0;t<e.length;t++)e[t].removeAttribute("data-inspector-highlight")},this._pickElement=function(e){var t;a.debug("Picking Element:",e),e.preventDefault(),e.stopPropagation();var i=e.target;if(i instanceof HTMLElement||i instanceof SVGElement)try{var r=null===(t=n.builder)||void 0===t?void 0:t.build(i);a.debug("Built locators:",r),"function"==typeof n.onPick?(a.debug("Calling callback:",n.onPick),n.onPick(r)):a.error("The onPick function is not set")}catch(e){a.error(e)}finally{n._removeAll()}},this._cancelPick=function(e){a.debug("Canceling Pick:",e);var t=e||window.event;"Escape"!==t.key&&27!==t.keyCode||(n._removeAll(),"function"==typeof n.onPick&&n.onPick())},this._removeAll=function(){a.debug("Removing all...");var e=document.getElementById("inspector-frame");e&&document.body.removeChild(e);var t=document.getElementById("inspector-info-box");t&&document.body.removeChild(t),document.removeEventListener("mousemove",n._showPick,!0),document.removeEventListener("click",n._pickElement,!0),document.removeEventListener("keydown",n._cancelPick,!0),n._removeHighlights()},this.builder=e,this.app=t||"picker"},a={info:console.log,debug:console.debug,error:console.error},l=function(e){return new Promise((function(t){return setTimeout(t,e)}))},u=function(e){a.debug("Focusing on element:",e),e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"});var t=document.createElement("div"),n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();t.id="inspector-focus",t.style.left=i.left-n.left+"px",t.style.top=i.top-n.top+"px",t.style.width=i.width+"px",t.style.height=i.height+"px",document.body.appendChild(t),setTimeout((function(){document.body.removeChild(t)}),500)},c=function(){a.debug("Setting error state...");var e=document.getElementById("inspector-frame")||document.createElement("div");e.className="error",setTimeout((function(){a.debug("Resetting error state..."),e.className="recorder"}),1250)};window.Inspector=new function(){var e=this;this.startPicker=function(t){a.debug("Starting picker..."),e.onPick=t,e.picker.setOnPick(e.onPick),e.picker._removeHighlights();var n=document.getElementById("inspector-frame")||document.createElement("div");n.id="inspector-frame",n.className="picker",document.body.appendChild(n),document.addEventListener("mousemove",e.picker._showPick,!0),document.addEventListener("click",e.picker._pickElement,!0),document.addEventListener("keydown",e.picker._cancelPick,!0)},this.highlightElements=function(t){a.debug("Highlighting elements:",t);for(var n=0;n<t.length;n++)e.picker._addHighlight(t[n])},this.describeElements=function(e){a.debug("Describing elements:",e);for(var t=[],n=0;n<e.length;n++){var i=e[n].cloneNode(!1).outerHTML;t.push(i)}return t},this.removeHighlights=function(){a.debug("Removing highlights"),e.picker._removeHighlights()},this.cancelPick=function(){a.debug("Cancelling pick and removing highlights"),e.picker._removeAll()},this.focusElement=function(e){return u(e)},this.recordEvent=function(t){return a.debug("Recording event..."),e.recorder.recordEvent(t)},this.stopRecording=function(){a.debug("Stopping recording..."),window.InspectorStop=!0,e.recorder.stop()},this.builder=new i.I(window),this.picker=new o(this.builder),this.recorder=new r.KN(this.builder,this.picker),this.currentPick=void 0,this.onPick=void 0;var t=document.getElementById("inspector-style")||document.createElement("style");t.id="inspector-style",t.type="text/css",document.head.appendChild(t)}},159:(e,t,n)=>{n.d(t,{KN:()=>v,g6:()=>d});var i=n(928),r=function(){return r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r.apply(this,arguments)},o=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(e){o(e)}}function l(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}u((i=i.apply(e,t||[])).next())}))},a=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},l=["name","title","id","for","href","class"],u=function(e){return e.nodeType===Node.ELEMENT_NODE},c=function(e){return["text","file","select"].includes(e)},s=function(e){var t=e.tagName.toLowerCase();if(i.bZ.debug("Classify tag:",t),"input"===t){var n=e;switch(i.bZ.debug("Element from input:",n),n.type){case"password":case"email":case"tel":case"url":case"number":case"search":case"text":case"time":case"date":case"datetime-local":case"week":case"month":case"color":return{type:"text",value:n.value};case"radio":return{type:"radio",value:n.value};case"checkbox":return{type:"checkbox",value:n.checked};case"file":return{type:"file",value:n.value};case"submit":case"image":case"range":case"reset":return{type:n.type,value:void 0}}}else{if("textarea"===t)return n=e,i.bZ.debug("Element from textarea:",n),{type:"text",value:n.value};if("select"===t)return n=e,i.bZ.debug("Element from select:",n),{type:"select",value:n.value};if("a"===t)return n=e,i.bZ.debug("Element from a:",n),{type:"a",value:n.href};if("button"===t)return n=e,i.bZ.debug("Element from button:",n),{type:"button",value:n.value};if("function"==typeof e.onclick||"function"==typeof e.onmousedown)return i.bZ.debug("Element from unknown element with onClick function:",e),{type:"reset",value:void 0}}i.bZ.debug("ERROR - Element could not be classified")},d=function(e,t,n){try{i.bZ.debug("Classifying event:",e);var r=e.target;if(!(r instanceof HTMLElement||r instanceof SVGElement))return void i.bZ.debug("Element not HTMLElement:",r);var o,a=t.build(r).map((function(e){return t.getSelectorAsObject(e)}));return i.bZ.debug("Selectors (mapped) from builder:",a),0===a.length?void i.bZ.debug("Skipping committing due to no selectors"):(o=g.parseNode(r,a,l,n),i.bZ.debug("Element attributes:",o),o?"text"===o.type&&""===o.value?(i.bZ.debug("Skipping saving empty text event"),{selectors:[],node:void 0,skipError:!0}):{selectors:a,node:o}:void i.bZ.debug("Skipping committing due to no relevant attributes"))}catch(e){return void i.bZ.debug("Could not classify event due to error",e)}},h={_getIndex:function(e){var t=!1,n=0,i=0;if(!e.parentNode)return 0;for(var r=e.parentNode.childNodes,o=0;o<r.length;o++){r[o]===e&&(t=!0);var a=r[o];u(a)&&a.tagName===e.tagName&&(n+=1,i=t?i:i+1)}return n>1?i+1:0},_buildAttributes:function(e,t){return t.map((function(t){var n,i;return(i="className"===t?e.className.length>0?e.className.split(" "):null:"index"===t?1:e.getAttribute(t))?((n={})["".concat(t)]=i,n):null})).filter((function(e){return e}))},build:function(e,t,n){var i;if(!e)return n;if(!e.parentNode)return n;if(e.nodeType===Node.DOCUMENT_NODE)return n;var r=this._buildAttributes(e,t);return n.push(((i={})["".concat(e.tagName.toLowerCase())]=r,i)),this.build(e.parentNode,t,n)}},f={build:function(e,t,n){var i=this,r=e[0],o=Object.keys(r)[0],a=r[o].reduce((function(e,t){return""===e?i._getSubpath(e,t,o):e}),""),l="/".concat(a);if(!t)return l;if(this._found(["@id","@for"],l))return l;if(this._found(["@name"],l)&&this._found(["select"],n))return l;var u=this._getIndex(l,t),c=u.count,s=u.index;return c>1&&s>1?"xpath=(".concat(l,")[").concat(s,"]"):l},_found:function(e,t){return e.some((function(e){return t.includes(e)}))},_getIndex:function(e,t){for(var n,i=1,r=1,o=document.evaluate(".".concat(e),document.body,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);n=o.iterateNext();)n===t&&(i=r),r+=1;return{count:r,index:i}},_getSubpath:function(e,t,n){return null!=t.for?"/".concat(n,'[@for="').concat(t.for,'"]'):null!=t.class&&"number"!=typeof t.class&&t.class.length>0?"/".concat(n,'[@class="').concat(t.class,'"]'):null!=t.title?"/".concat(n,'[@title="').concat(t.title,'"]'):null!=t.href?"/".concat(n,'[@href="').concat(t.href,'"]'):null!=t.name?"/".concat(n,'[@name="').concat(t.name,'"]'):null!=t.id?"/".concat(n,'[@id="').concat(t.id,'"]'):null!=t.index?"/".concat(n):""}},g={parseNode:function(e,t,n,i){if(void 0!==e){var o=i||s(e);void 0===o&&e.parentElement&&(o=s(e.parentElement),e=e.parentElement);var a=h.build(e,n,[]),l=m();return void 0!==o?r(r({},o),{selectors:t,time:l,path:f.build(a,e,o.type||"default")}):void 0}}},m=function(){return(new Date).getTime()},v=function(e,t){var n,l=this;this.recordEvent=function(e){l._removeListeners(),l.actionsList=[];var t=document.getElementById("inspector-frame");l.lock.isLocked||t||((t=document.createElement("div")).id="inspector-frame",t.className="recorder",document.body.appendChild(t)),l.callback=e,l._addListeners()},this.stop=function(){l.callback&&l.callback({actionType:"stop",actions:void 0,url:document.URL}),l.picker._removeAll(),l._removeListeners()},this._addListeners=function(){document.addEventListener("mousemove",l.picker._showPick,!0),document.addEventListener("click",l._handleClick,!0),document.addEventListener("change",l._handleChange,!0),document.addEventListener("keydown",l._handleKeyboardEvent,!0),document.addEventListener("contextmenu",l._handleContextMenu,!0),document.addEventListener("input",l._handleInputChange,!0)},this._removeListeners=function(){document.removeEventListener("mousemove",l.picker._showPick,!0),document.removeEventListener("change",l._handleChange,!0),document.removeEventListener("click",l._handleClick,!0),document.removeEventListener("keydown",l._handleKeyboardEvent,!0),document.removeEventListener("contextmenu",l._handleContextMenu,!0),document.removeEventListener("input",l._handleInputChange,!0)},this._handleInputChange=function(e){i.bZ.debug("INPUT EVENT:",e),l.inputEvent=e},this._handleContextMenu=function(e){var t=e.target;if(t instanceof HTMLElement||t instanceof SVGElement)try{e.preventDefault();var n=d(e,l.builder,{type:"verify",value:void 0});if(void 0===n||void 0===n.node)return void((null==n?void 0:n.skipError)||(0,i.B9)());var o=r(r({},n.node),{trigger:"click"});i.bZ.debug("Appending wait action:",o),l.actionsList.push(o),i.bZ.debug("Event list:",l.actionsList),(0,i.C5)(t),i.bZ.debug("Passing click event through callback -> WAITING..."),l._sendEvents()}catch(e){i.bZ.debug("Skipping committing wait due to error",e),(0,i.B9)()}},this._handleChange=function(e){i.bZ.debug("CHANGE EVENT:",e);var t=e.target;if(t instanceof HTMLElement||t instanceof SVGElement){var n=d(e,l.builder);if(void 0!==n&&void 0!==n.node){i.bZ.debug("Is recording in progress:",l.lock.isLocked),l.lock.acquire();try{if(i.bZ.debug("Is handled by change?:",c(n.node.type)),c(n.node.type)){var u=document.getElementById("inspector-frame")||document.createElement("div");u.className="recorder_in_progress",i.bZ.debug("Preventing propagation..."),e.preventDefault(),e.stopPropagation();var s=r(r({},n.node),{trigger:"change"});i.bZ.debug("Appending change action",s),l.actionsList.push(s),i.bZ.debug("Event list:",l.actionsList),i.bZ.debug("Passing change event through callback"),l._sendEvents(),o(l,void 0,void 0,(function(){var e=this;return a(this,(function(t){switch(t.label){case 0:return[4,(0,i.gw)(750).then((function(){u.className="recorder",e.lock.release()}))];case 1:return[2,t.sent()]}}))}))}else i.bZ.debug("Skipping committing change - will be handled by onClick handler")}catch(e){i.bZ.debug("Skipping committing change due to error",e),(0,i.B9)()}l.inputEvent=void 0,l.lock.release()}else(null==n?void 0:n.skipError)||(0,i.B9)()}},this._handleClick=function(e){return o(l,void 0,void 0,(function(){var t,n,l,u,s,h=this;return a(this,(function(f){if(i.bZ.info("CLICK EVENT:",e),t=e.target,this.inputEvent&&!this.lock.isLocked&&this._handleChange(this.inputEvent),!(t instanceof HTMLElement||t instanceof SVGElement))return[2];if(-1===e.detail)return i.bZ.debug("Dummy click. Exiting..."),[2];if(void 0===(n=d(e,this.builder))||void 0===n.node)return(null==n?void 0:n.skipError)||(0,i.B9)(),[2];i.bZ.debug("Is recording in progress:",this.lock.isLocked),this.lock.acquire();try{i.bZ.debug("Is handled by change?:",c(n.node.type)),c(n.node.type)?(i.bZ.debug("Skipping committing click - will be handled by onChange handler"),this.lock.release()):((l=document.getElementById("inspector-frame")||document.createElement("div")).className="recorder_in_progress",i.bZ.debug("Preventing propagation..."),e.preventDefault(),e.stopPropagation(),u=r(r({},n.node),{trigger:"click"}),i.bZ.debug("Appending click action:",u),this.actionsList.push(u),i.bZ.debug("Event list:",this.actionsList),i.bZ.debug("Passing click event through callback -> RECORDING..."),this._sendEvents(),s=function(){return o(h,void 0,void 0,(function(){var e=this;return a(this,(function(n){switch(n.label){case 0:return[4,(0,i.gw)(750).then((function(){i.bZ.debug("Pushing dummy event..."),l.className="recorder",t.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,detail:-1})),e.lock.release()}))];case 1:return[2,n.sent()]}}))}))},s())}catch(e){i.bZ.debug("Skipping committing click due to error",e),(0,i.B9)()}return[2]}))}))},this._handleKeyboardEvent=function(e){var t=e||window.event;"Escape"!==t.key&&27!==t.keyCode||l.stop(),"Tab"!==t.key&&9!==t.keyCode||!l.inputEvent||l._handleChange(l.inputEvent)},this._sendEvents=function(e){l.callback?(l.callback({actionType:"event",actions:l.actionsList,url:document.URL}),i.bZ.debug("Successfully invoked callback:",{actionType:"event",action:l.actionsList,url:document.URL}),e&&(l.actionsList=[])):i.bZ.debug("No callback function defined")},this.builder=e,this.picker=t,this.picker.setApp("recorder"),this.actionsList=[],this.lock={isLocked:n=!1,acquire:function(){return o(void 0,void 0,void 0,(function(){var e,t;return a(this,(function(r){switch(r.label){case 0:i.bZ.debug("Acquiring lock..."),e=!1,t=0,r.label=1;case 1:return t<200?[4,(0,i.gw)(10).then((function(){!0===n&&(e=!0)}))]:[3,4];case 2:if(r.sent(),e)return[3,4];r.label=3;case 3:return t++,[3,1];case 4:if(!e)throw Error("Timeout while acquiring lock");return n=!0,[2]}}))}))},release:function(){return o(void 0,void 0,void 0,(function(){return a(this,(function(e){return i.bZ.debug("Releasing lock..."),n=!1,[2]}))}))}},this.inputEvent=void 0;var u=document.getElementById("inspector-style")||document.createElement("style");u.id="inspector-style",u.type="text/css",document.head.appendChild(u)}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(159)})();